let d="http://sekolahskillapi.test/api",r="http://sekolahskill-admin.test";$("#addArtikel").on("click",function(t){t.preventDefault(),i("add").done(e=>{$("#modal-content").html(e.html),$("#summernote").summernote(),$("#modal-lg").modal("show")}).fail(e=>{console.log(e)})});$(".editArtikel").on("click",function(t){t.preventDefault();var e=$(this).data("id");i("edit",e).done(o=>{$("#modal-content").html(o.html),$("#summernote").summernote(),$("#modal-lg").modal("show")}).fail(o=>{console.log(o)})});$(".btn-cancel").on("click",function(){$("#modal-content").empty(),$("#modal-content-add").empty(),console.log("ss")});$("#modal-content").on("submit","#sumbitArtikel",function(t){t.preventDefault();var e=$("#modal-content").find("#sumbitArtikel"),o=e.find("#gambar");let s=e.serializeArray(),l=new FormData;s.forEach(a=>{console.log(a.name),l.append(a.name,a.value)}),l.append("gambar",o[0].files[0]),l.append("mode","add"),u("add",l).then(a=>{Swal.fire({icon:"success",title:"Data Updated",text:"berhasil nambah kelas"}).then(n=>{n.isConfirmed&&(m("modal-add","formAdd"),$("#renderKelas").html(a.html))})}).catch(a=>{console.log("Error:",a),a.status===500&&Swal.fire({icon:"error",title:"Error System",text:a.response.message})})});function i(t=null,e=null){if(t=="add")return $.ajax({url:`${r}/form/add-artikel`,type:"GET"});if(t=="edit")return $.ajax({url:`${r}/form/edit-artikel/${e}`,type:"GET"})}function m(t,e){$(`#${t}`).modal("hide"),$(`#${e}`)[0].reset()}function u(t=null,e=null){if(t=="add")return new Promise((o,s)=>{$.ajax({url:d+"/artikel/add",type:"POST",data:e,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:5e3})},success:(l,a,n)=>{n.status===200?o(l):s({status:n.status,response:l})},error:(l,a,n)=>{s({status:l.status,response:l.responseJSON||n})}})})}
