let h="http://sekolahskillapi.test/api",k="http://sekolahskill-admin.test";$("#modalAdd").on("click",function(a){a.preventDefault(),v("addkelas").done(t=>{$("#modal-content-add").html(t.html);let l=document.getElementById("guru"),n=document.getElementById("namaPemateri");$("#summernote").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("#summernoteProfile").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("<input>").attr({type:"hidden",id:"idmapelo",name:"categorise_id",value:$(this).data("id"),readonly:!0}).appendTo("form");let e=$(".add"),s=10,i=1,d=$(".wrapper"),b=`
                            <div class="d-flex justify-content-between gap-1 mt-2">
                                    <input name="kurikulum[]" id="" type="text" placeholder="Name" class="required-entry form-control">
                                    <a class="btn btn-danger remove" href="javascript:void()0" >Remove</a>
                            </div>
                        `;$(e).click(function(m){m.preventDefault(),console.log("hellos"),i<s&&(i++,$(d).append(b))}),$(d).on("click",".remove",function(m){m.preventDefault(),$(this).parent("div").remove(),i--}),l.addEventListener("input",()=>{n.value=l.value}),$("#modal-add").modal("show");let c=$("#formAdd"),y=c.find("#gambar"),S=c.find("#photo");c.on("submit",function(m){m.preventDefault();let D=c.serializeArray(),u=new FormData;D.forEach(o=>{console.log(o.name),u.append(o.name,o.value)}),u.append("gambar",y[0].files[0]),u.append("photo",S[0].files[0]),g("add",u).then(o=>{console.log(o[0].code),o[0].code==401?Swal.fire({icon:"warning",title:"Error",text:"waktu sesi anda sebagai admin telah habis, silahkan login kembali"}).then(r=>{r.isConfirmed&&(f("modal-add","formAdd"),$("#renderKelas").html(o.html))}):o[0].code==400?Swal.fire({icon:"warning",title:"Data Corrected",text:"Opps Kelas Sudah Tersedia"}).then(r=>{r.isConfirmed&&(f("modal-add","formAdd"),$("#renderKelas").html(o.html))}):o[0].code==0?Swal.fire({icon:"warning",title:"token",text:"Opps Tidak Valid"}).then(r=>{r.isConfirmed&&(f("modal-add","formAdd"),$("#renderKelas").html(o.html))}):Swal.fire({icon:"success",title:"Data Updated",text:"berhasil nambah kelas"}).then(r=>{r.isConfirmed&&(f("modal-add","formAdd"),$("#renderKelas").html(o.html))})}).catch(o=>{if(o.responseJSON)if(o.responseJSON.errors){const r=o.responseJSON.errors;let w="";for(const p in r)w+=`${p}: ${r[p][0]}
`;Swal.fire({icon:"warning",title:"Input Corrected",text:w}).then(p=>{p.isConfirmed})}else Swal.fire({icon:"warning",title:"Form",text:"Ada kesalahan dalam pengisian form"}).then(r=>{r.isConfirmed});else Swal.fire({icon:"warning",title:"Proccesing Data",text:"Ada kesalahan dalam Server"}).then(r=>{r.isConfirmed})})})}).fail(t=>{console.log(t)})});$("#renderKelas").on("click",".btn-delete",function(a){a.preventDefault(),console.log("hellos");let t={kelas_id:$(this).data("id"),category:$(this).data("category")};$("#modal-hapus").modal("show"),$("#catgeoriDeleteForm").on("submit",function(l){l.preventDefault(),g("delete",t).then(n=>{Swal.fire({icon:"success",title:"Hapus",html:"<span> Yangkin Menghapus Data Ini</span>"}).then(e=>{e.isConfirmed&&(f("modal-hapus","catgeoriDeleteForm"),$("#renderKelas").html(n.html))})}).catch(n=>{console.log(n)})})});$("#renderKelas").on("click",".btn-edit",function(a){a.preventDefault(),v("editkelas",$(this).data("slug")).done(t=>{$("#modal-content").html(t.html),$("#summernoteEdit").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("#summernoteProfileEdit").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100});let l=$(".add"),n=10,e=1,s=$(".wrapper"),i=`
            <div class="d-flex justify-content-between gap-1 mt-2">
                    <input name="kurikulum[]" id="" type="text" placeholder="Name" class="required-entry form-control">
                    <a class="btn btn-danger remove" href="javascript:void()0" >Remove</a>
            </div>
        `;$(l).click(function(d){d.preventDefault(),console.log("hellos"),e<n&&(e++,$(s).append(i))}),$(s).on("click",".remove",function(d){d.preventDefault(),$(this).parent("div").remove(),e--}),$("#modal-edit").modal("show")}).fail(t=>{console.log(t)})});$(document).on("submit","#formEdit",function(a){a.preventDefault();let t=$("#formEdit"),l=t.find("#gambar"),n=t.find("#photo"),e=$("#formEdit").serializeArray(),s=new FormData;for(let i=0;i<e.length;i++)s.append(e[i].name,e[i].value);s.append("gambar",l[0].files[0]),s.append("photo",n[0].files[0]),g("edit",s).then(i=>{$("#renderKelas").html(i.html)}).catch(i=>{console.info("error",i)})});$(".btn-cancel").on("click",function(){$("#modal-content").empty(),$("#modal-content-add").empty()});function g(a=null,t=null){if(a=="add")return new Promise((l,n)=>{$.ajax({url:h+"/kelas",type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:5e3})},success:e=>{l(e)},error:e=>{n(e)}})});if(a=="edit")return new Promise((l,n)=>{$.ajax({url:h+"/kelas/"+t.get("id"),type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:e=>{l(e)},error:e=>{n(e)}})});if(a=="delete")return new Promise((l,n)=>{$.ajax({url:h+"/kelas/"+t.kelas_id,type:"DELETE",data:{category:t.category},beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:e=>{l(e)},error:e=>{n(e)}})});if(a=="detail")return new Promise((l,n)=>{$.ajax({url:h+"/api/kelas/"+t.slug,type:"GET",beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:function(e){l(e)},error:function(e){n(e)}})})}function v(a=null,t=null){if(a=="editkelas")return $.ajax({url:`${k}/form/edit-kelas/${t}`,type:"GET"});if(a=="addkelas")return $.ajax({url:`${k}/form/add-kelas`,type:"GET"})}function f(a,t){$(`#${a}`).modal("hide"),$(`#${t}`)[0].reset()}
