let c="http://sekolahskillapi.test/api",g="http://sekolahskill-admin.test";$("#modalAdd").on("click",function(s){s.preventDefault(),w("addkelas").done(a=>{$("#modal-content-add").html(a.html);let o=document.getElementById("guru"),n=document.getElementById("namaPemateri");$("#btnSudah").addClass("active"),$("#summernote").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("#summernoteProfile").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("<input>").attr({type:"hidden",id:"idmapelo",name:"categorise_id",value:$(this).data("id"),readonly:!0}).appendTo("form");let e=$(".add"),i=10,t=1,d=$(".wrapper"),k=`
                            <div class="d-flex justify-content-between gap-1 mt-2">
                                    <input name="kurikulum[]" id="" type="text" placeholder="Name" class="required-entry form-control">
                                    <a class="btn btn-danger remove" href="javascript:void()0" >Remove</a>
                            </div>
                        `;$(e).click(function(u){u.preventDefault(),console.log("hellos"),t<i&&(t++,$(d).append(k))}),$(d).on("click",".remove",function(u){u.preventDefault(),$(this).parent("div").remove(),t--}),o.addEventListener("input",()=>{n.value=o.value}),$("#modal-add").modal("show");let f=$("#formAdd"),v=f.find("#gambar"),b=f.find("#photo");f.on("submit",function(u){u.preventDefault();let S=f.serializeArray(),m=new FormData;S.forEach(l=>{console.log(l.name),m.append(l.name,l.value)}),m.append("gambar",v[0].files[0]),m.append("photo",b[0].files[0]),h("add",m).then(l=>{console.log(l),l.redirect_url?window.location.href=l.redirect_url:console.log(l),Swal.fire({icon:"success",title:"Data Updated",text:"berhasil nambah kelas"}).then(r=>{r.isConfirmed&&(p("modal-add","formAdd"),$("#renderKelas").html(l.html))})}).catch(l=>{console.log("Error:",l),l.status===419?Swal.fire({icon:"error",title:"Session Expired",text:"Please reload the page and try again."}):l.status===200?Swal.fire({icon:"success",title:"Data Updated",text:l.response.message}).then(r=>{r.isConfirmed&&(p("modal-add","formAdd"),$("#renderKelas").html(l.response.html))}):l.status===401?Swal.fire({icon:"warning",title:"Error",text:"waktu sesi anda sebagai admin telah habis, silahkan login kembali"}).then(r=>{r.isConfirmed}):l.status===400?Swal.fire({icon:"warning",title:"Data Corrected",text:"Opps Kelas Sudah Tersedia"}).then(r=>{r.isConfirmed}):l.status===0?Swal.fire({icon:"warning",title:"token",text:"Opps Tidak Valid"}).then(r=>{r.isConfirmed}):Swal.fire({icon:"error",title:"An error occurred",text:l.response?l.response.message:"Unknown error"})})})}).fail(a=>{console.log(a)})});$("#modal-content-add").on("click","#btnSudah",function(s){s.preventDefault(),$("#componentIdPlaylist").toggleClass("d-none"),$(this).addClass("active"),$("#btnBelum").removeClass("active")});$("#renderKelas").on("click",".btn-delete",function(s){s.preventDefault(),console.log("hellos");let a={kelas_id:$(this).data("id"),category:$(this).data("category")};$("#modal-hapus").modal("show"),$("#catgeoriDeleteForm").on("submit",function(o){o.preventDefault(),h("delete",a).then(n=>{Swal.fire({icon:"success",title:"Hapus",html:"<span> Yangkin Menghapus Data Ini</span>"}).then(e=>{e.isConfirmed&&(p("modal-hapus","catgeoriDeleteForm"),$("#renderKelas").html(n.html))})}).catch(n=>{console.log(n)})})});$("#renderKelas").on("click",".btn-edit",function(s){s.preventDefault(),w("editkelas",$(this).data("slug")).done(a=>{$("#modal-content").html(a.html),$("#summernoteEdit").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100}),$("#summernoteProfileEdit").summernote({placeholder:"Isi Disnini",tabsize:2,focus:!0,height:100});let o=$(".add"),n=10,e=1,i=$(".wrapper"),t=`
            <div class="d-flex justify-content-between gap-1 mt-2">
                    <input name="kurikulum[]" id="" type="text" placeholder="Name" class="required-entry form-control">
                    <a class="btn btn-danger remove" href="javascript:void()0" >Remove</a>
            </div>
        `;$(o).click(function(d){d.preventDefault(),console.log("hellos"),e<n&&(e++,$(i).append(t))}),$(i).on("click",".remove",function(d){d.preventDefault(),$(this).parent("div").remove(),e--}),$("#modal-edit").modal("show")}).fail(a=>{console.log(a)})});$(document).on("submit","#formEdit",function(s){s.preventDefault();let a=$("#formEdit"),o=a.find("#gambar"),n=a.find("#photo"),e=$("#formEdit").serializeArray(),i=new FormData;for(let t=0;t<e.length;t++)i.append(e[t].name,e[t].value);i.append("gambar",o[0].files[0]),i.append("photo",n[0].files[0]),h("edit",i).then(t=>{$("#renderKelas").html(t.html)}).catch(t=>{console.info("error",t)})});$(".btn-cancel").on("click",function(){$("#modal-content").empty(),$("#modal-content-add").empty()});function h(s=null,a=null){if(s=="add")return new Promise((o,n)=>{$.ajax({url:c+"/kelas",type:"POST",data:a,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:5e3})},success:(e,i,t)=>{t.status===200?o(e):n({status:t.status,response:e})},error:(e,i,t)=>{n({status:e.status,response:e.responseJSON||t})}})});if(s=="edit")return new Promise((o,n)=>{$.ajax({url:c+"/kelas/"+a.get("id"),type:"POST",data:a,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:(e,i,t)=>{t.status===200?o(e):n({status:t.status,response:e})},error:(e,i,t)=>{n({status:e.status,response:e.responseJSON||t})}})});if(s=="delete")return new Promise((o,n)=>{$.ajax({url:c+"/kelas/"+a.kelas_id,type:"DELETE",data:{category:a.category},beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:e=>{o(e)},error:e=>{n(e)}})});if(s=="detail")return new Promise((o,n)=>{$.ajax({url:c+"/api/kelas/"+a.slug,type:"GET",beforeSend:function(){Swal.fire({title:"Please Wait !",allowOutsideClick:!1,showConfirmButton:!1,onBeforeOpen(){Swal.showLoading()},timer:4e3})},success:(e,i,t)=>{t.status===200?o(e):n({status:t.status,response:e})},error:(e,i,t)=>{n({status:e.status,response:e.responseJSON||t})}})})}function w(s=null,a=null){if(s=="editkelas")return $.ajax({url:`${g}/form/edit-kelas/${a}`,type:"GET"});if(s=="addkelas")return $.ajax({url:`${g}/form/add-kelas`,type:"GET"})}function p(s,a){$(`#${s}`).modal("hide"),$(`#${a}`)[0].reset()}
